<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>一米天动画</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0" />
	<script src="zepto.min.1.1.6.js"></script>
	<link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body id="main" class="">
	<div id="stage">
		<div id="background" class="background"></div>		
		<div id="about" class="about"></div>
		<div id="character" class="character"></div>
		<div id="works" class="works"></div>
		<div id="contact" class="contact"></div>
		<div id="contact_copy" class="contact_copy"></div>
		<div id="contact_final" class="contact_final"></div>		
		<div id="man" class="man">
			<div id="left-hand" class="hand left-hand"></div>
			<div id="right-hand" class="hand right-hand"></div>
			<div id="right-hand-copy" class="right-hand right-hand-copy"></div>
			<div id="foot" class="foot"></div>
			<div id="person" class="person"></div>
		</div>	
		<div id="stage_close" class="stage_close">
			<div id="rectangle_up" class="rectangle"></div>
			<div id="rectangle_down" class="rectangle"></div>
		</div>
		<div id="wall" class="wall"></div>
		<div id="door" class="door"></div>
		<div id="tip_about" class="tip"></div>
		<div id="tip_works" class="tip"></div>
		<div id="tip_contact" class="tip"></div>		
	</div>
	
	<script>
	var $rightHand = $("#right-hand"),
		$rightHandCopy = $("#right-hand-copy"),
		$aboutPost = $("#about");
		$contact = $("#contact"),
		$contactCopy = $("#contact_copy"),
		$closeButton = $("#stage_close"),
		$person = $("#person"),
		$contactFinal = $("#contact_final");

	$("#tip_about").tap(function() {
		showAboutPost();		
	})

	$("#tip_contact").tap(function() {
		showContact();
	});

	$closeButton.tap(function() {
		switch($closeButton.current) {
			case "contact": 
				hideContact();
			case  "aboutPost":
				hideAboutPost();
			case "workVedio":
				hideWorkVedio();
			default:
				break;
		}
	});
	
	function hideTips() {
		$(".tip").each(function(index, item) {
			$(item).css({
				"display" : "none"
			})
		});
	}

	function showTips() {
		$(".tip").each(function(index, item) {				
			$(item).css({
				"display" : "block"
			})
		});
	}

	function showCloseButton() {
		$closeButton.css({
			"-webkit-transform" : "scale(1,1) rotate(180deg)"
		});
	}

	function hideCloseButton() {
		$closeButton.css({
			"-webkit-transform" : "scale(0,0) rotate(0deg)"
		});
	}

	function showContact() {
		var timeout_contact = null,
			timeout_hand = null,
			timeout_hidden = null,
			timeout_show = null;

		$closeButton.current = "contact";

		hideTips();

		$rightHand.css({
			"visibility" : "hidden"
		});

		$rightHandCopy.css({
			"visibility" : "visible",
			"-webkit-transform" : "translate3d(60%, -20%, 0) rotate(72deg)"
		});

		setTimeout(function() {
			showCloseButton();
		}, 400);
		
		$person.css({
			"-webkit-transform" : "skewX(-3deg)"
		});

		setTimeout(function() {
			$person.css({
				"-webkit-transform" : "skewX(2deg)"
			});
		}, 200);

		setTimeout(function() {
			$person.css({
				"-webkit-transform" : "skewX(0deg)"
			});
		}, 500);

		timeout_contact = setTimeout(function() {
			$contact.css({
				"-webkit-transform" : "skewX(40deg)  translate3d(120%, -240%, 0)"
			});
		}, 200);

		timeout_hand = setTimeout(function(){
			$rightHandCopy.css({
				"-webkit-transform" : "translate3d(90%, -40%, 0) rotate(20deg)"
			});
		}, 200);

		timeout_hidden = setTimeout(function(){
			$contact.css({
				"visibility" : "hidden"
 			});
		}, 180);

 		timeout_show = setTimeout(function(){
 			$contactCopy.css({
		 		"visibility" : "visible",
				"left" : "50%",
				"top" : "50%",	
				"-webkit-transform" : "translate3d(-50%, -50%, 0) rotate(360deg) scale(1, 1)"
 			});
 		}, 350);

 		setTimeout(function() {
 			$contactFinal.css({
 				"visibility" : "visible"
 			})
 		}, 800);
	}

	function hideContact() {
		$closeButton.current = "";

		$contactFinal.css({
			"visibility" : "hidden"
		});
	

		$contactCopy.css({
			"visibility" : "hidden",
			"left" : "18%",
			"top" : "18%",	
			"-webkit-transform" : "translate3d(0, 0, 0) rotate(0deg) scale(0.06, 0.06)"
		});
		
		setTimeout(function() {
			hideCloseButton();
		}, 100);

		setTimeout(function() {
			$person.css({
				"-webkit-transform" : "skewX(2deg)"
			})
		}, 150);

		setTimeout(function() {
			$person.css({
				"-webkit-transform" : "skewX(-3deg)"
			})
		}, 450);

		setTimeout(function() {
			$person.css({
				"-webkit-transform" : "skewX(0deg)"
			})
		}, 750);

		setTimeout(function(){
			$contact.css({
				"visibility" : "visible"
 			})
		}, 450);

		setTimeout(function() {
			$rightHandCopy.css({
				"-webkit-transform" : "translate3d(60%, -20%, 0) rotate(72deg)"
			});
		}, 450);

		setTimeout(function() {
			$contact.css({
				"-webkit-transform" : "skewX(40deg)"
			});
		}, 450);

		setTimeout(function() {
			$rightHandCopy.css({
				"visibility" : "hidden",
				"-webkit-transform" : "none"
			});
		}, 650);

		setTimeout(function() {
			$rightHand.css({
				"visibility" : "visible"
			});
			showTips();			
		}, 850);
	}

	function showAboutPost() {
		hideTips();

		$closeButton.current = "aboutPost";

		$aboutPost.css({
			"-webkit-transform" : "translate3d(-36%, -52%, 0) rotate(-20deg) scale(0.22, 0.2)"
		});
		
		setTimeout(function() {
			showCloseButton();
		}, 200);

		setTimeout(function() {
			$aboutPost.css({
				"-webkit-transform" : "translate3d(-50%, -42%, 0) rotate(0deg) scale(1,1)",
				"z-index" : "100"
			});
		}, 300)		
	}

	function hideAboutPost() {
		$closeButton.current = "";

		$aboutPost.css({
			"-webkit-transform" : "translate3d(-36%, -52%, 0) rotate(-20deg) scale(0.22, 0.2)"
		});

		setTimeout(function() {
			hideCloseButton();
		}, 100);

		setTimeout(function() {
			$aboutPost.css({
				"-webkit-transform" : "translate3d(-30%, -43.6%, 0) scale(0.22, 0.2) rotate(0deg)",
				"z-index" : "0"
			});
		}, 380);

		setTimeout(function() {
			showTips();
		}, 700);
	}

	function showWorkVedio() {

	}

	function hideWorkVedio() {

	}
	</script>
</body>
</html>